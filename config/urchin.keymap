#define HOST_OS 2 // macOS

#include <behaviors.dtsi>
#include <dt-bindings/zmk/keys.h>
#include <dt-bindings/zmk/bt.h>
#include <zmk-helpers/helper.h>
#include <zmk-helpers/key-labels/34.h>

// Layers
#define BASE 0
#define GRAPHITE 1
#define FOCAL 2
#define NUM 3
#define SYM 4
#define NAV 5
#define FN 6
#define SYS 7

#include "modules/globals.dtsi"
#include "modules/hrm.dtsi"
#include "modules/behaviors.dtsi"
#include "modules/combos.dtsi"
#include "modules/macros.dtsi"

// Shorter names
#define NAV_LEFT  &kp LEFT                     // Tap: left  | Cmd+Tap: start of line (native).
#define NAV_RIGHT &kp RIGHT                    // Tap: right | Cmd+Tap: end   of line (native).
#define NAV_UP    &kp UP                       // Tap: up    | Cmd+Tap: start of doc (native).
#define NAV_DOWN  &kp DOWN                     // Tap: down  | Cmd+Tap: end   of doc (native).
#define MT_DEL    &mt LA(DEL) DEL              // Tap: del   | Long-tap: delete word fwd.
#define CANCEL    &kp K_CANCEL                 // Cancel caps-word & auto-layers.
#define WIN_CYCLE &kp LG(GRAVE)                // Cycle through windows.
#define WIN_CYCLE_REV &hml LGUI LG(LS(GRAVE))  // Cycle through windows in reverse.
#define VOL_DOWN  &hml LSHIFT C_VOL_DN         // Volume down.
#define PLAY_PAUSE &hml LCTRL C_PP             // Play/pause.
#define MUTE &hml LALT C_MUTE                  // Mute.
#define ALFRED &kp LG(SPACE)
#define TRANSLATE &kp LA(SPACE)
#define CHATGPT &kp LS(LA(SPACE))
#define GO_BACK &kp LG(LBKT)
#define GO_FORWD &kp LG(RBKT)
#define SHIFT_BSPC &lt_shift LSHIFT LA(BSPC)
#define NUM_A &hml LGUI LG(A)
#define NUM_S &hml LALT LG(S)
#define NUM_D &hml LSHIFT LG(D)
#define NUM_F &hml LCTRL LG(F)
#define NUM_PLUS &mt MINUS PLUS
#define NUM_MULTI &mt SLASH ASTERISK


ZMK_LAYER(Base,
//╭─────────────┬─────────────┬─────────────┬─────────────┬─────────────╮ ╭─────────────┬─────────────┬─────────────┬─────────────┬─────────────╮
    &kp Q         &kp W         &kp E         &kp R         &kp T           &kp Y         &kp U         &kp I         &kp O         &kp P        
//├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤ ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
    &hml LGUI A &hml LALT S   &hml LSHIFT D   &hml LCTRL F  &kp G           &kp H        &hmr RCTRL J &hmr RSHIFT K   &hmr RALT L   &hmr RGUI SQT
//├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤ ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
    &kp Z         &kp X         &kp C         &kp V         &kp B           &kp N         &kp M         &comma_morph  &dot_morph    &qexcl       
//╰─────────────┴─────────────┴─────────────┼─────────────┼─────────────┤ ├─────────────┼─────────────┼─────────────┴─────────────┴─────────────╯
                                              SHIFT_BSPC    &lt NUM TAB    &lt_spc SYM 0 &lt NAV RET
//                                          ╰─────────────┴─────────────╯ ╰─────────────┴─────────────╯
)

ZMK_LAYER(Graphite,
//╭─────────────┬─────────────┬─────────────┬─────────────┬─────────────╮ ╭─────────────┬─────────────┬─────────────┬─────────────┬─────────────╮
    &kp B         &kp L         &kp D         &kp W         &kp Z           &kp SQT       &kp F         &kp O         &kp U         &kp J        
//├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤ ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
    &hml LGUI N &hml LALT R   &hml LSHIFT T   &hml LCTRL S  &kp G           &kp Y        &hmr RCTRL H &hmr RSHIFT A   &hmr RALT E   &hmr RGUI I
//├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤ ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
    &kp Q         &kp X         &kp M         &kp C         &kp V           &kp K         &kp P         &comma_morph  &dot_morph    &qexcl       
//╰─────────────┴─────────────┴─────────────┼─────────────┼─────────────┤ ├─────────────┼─────────────┼─────────────┴─────────────┴─────────────╯
                                              SHIFT_BSPC    &lt NUM TAB    &lt_spc SYM 0 &lt NAV RET
//                                          ╰─────────────┴─────────────╯ ╰─────────────┴─────────────╯
)


ZMK_LAYER(Focal,
//╭─────────────┬─────────────┬─────────────┬─────────────┬─────────────╮ ╭─────────────┬─────────────┬─────────────┬─────────────┬─────────────╮
    &kp V         &kp L         &kp H         &kp G         &kp K           &kp Q         &kp F         &kp O         &kp U         &kp J
//├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤ ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
    &hml LGUI S &hml LALT R   &hml LSHIFT N   &hml LCTRL T  &kp B           &kp Y        &hmr RCTRL C &hmr RSHIFT A   &hmr RALT E   &hmr RGUI I
//├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤ ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
    &kp Z         &kp X         &kp M         &kp D         &kp P           &kp SQT       &kp W         &dot_morph    &comma_morph  &qexcl
//╰─────────────┴─────────────┴─────────────┼─────────────┼─────────────┤ ├─────────────┼─────────────┼─────────────┴─────────────┴─────────────╯
                                              SHIFT_BSPC    &lt NUM TAB    &lt_spc SYM 0 &lt NAV RET
//                                          ╰─────────────┴─────────────╯ ╰─────────────┴─────────────╯
)


ZMK_LAYER(Num,
//╭─────────────┬─────────────┬─────────────┬─────────────┬─────────────╮ ╭─────────────┬─────────────┬─────────────┬─────────────┬─────────────╮
    &kp LG(Q)     &kp LG(W)     &kp LG(E)     &kp LG(R)     &kp LG(T)       NUM_PLUS     &kp N7        &kp N8         &kp N9        &kp EQUAL          
//├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤ ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
    NUM_A         NUM_S         NUM_D         NUM_F         &kp LG(G)       NUM_MULTI    &hmr RCTRL N4 &hmr RSHIFT N5 &hmr RALT N6  &hmr RGUI N0
//├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤ ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
    &kp LG(Z)     &kp LG(X)     &kp LG(C)     &kp LG(V)     &kp LG(B)       &kp COMMA    &kp N1        &kp N2        &kp N3         &kp DOT         
//╰─────────────┴─────────────┴─────────────┼─────────────┼─────────────┤ ├─────────────┼─────────────┼─────────────┴─────────────┴─────────────╯
                                              ___           ___             ___           ___
//                                          ╰─────────────┴─────────────╯ ╰─────────────┴─────────────╯
)


ZMK_LAYER(Sym,
//╭─────────────┬─────────────┬─────────────┬─────────────┬─────────────╮   ╭─────────────┬─────────────┬─────────────┬─────────────┬─────────────╮
    &kp GRAVE    &kp CARET     &kp ASTRK     &kp AMPS      &kp LPAR           &kp RPAR      &kp PLUS      XXX           &kp PIPE      &kp BACKSLASH
//├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤   ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
    &kp EQUAL    &kp TILDE     &kp PRCNT     &kp DLLR      &kp LBKT           &kp RBKT      &sk RCTRL     &sk RSHIFT    &sk RALT      &sk RGUI
//├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤   ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
    &kp SLASH    &kp HASH      &kp AT        &kp EXCL      &kp LBRC           &kp RBRC      &kp EQUAL     ___           ___           ___
//╰─────────────┴─────────────┴─────────────┼─────────────┼─────────────┤   ├─────────────┼─────────────┼─────────────┴─────────────┴─────────────╯
                                             &kp UNDER    &kp MINUS           ___           ___
//                                          ╰─────────────┴─────────────╯   ╰─────────────┴─────────────╯
)

ZMK_LAYER(Nav,
//╭─────────────┬─────────────┬─────────────┬─────────────┬─────────────╮ ╭─────────────┬─────────────┬─────────────┬─────────────┬─────────────╮
    WIN_CYCLE     WIN_CYCLE_REV XXX           XXX           XXX             XXX           GO_BACK       &swapper     GO_FORWD      MT_DEL          
//├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤ ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
    XXX           &sk LALT      &sk LSHIFT    &sk LCTRL     XXX             NAV_LEFT      NAV_DOWN      NAV_UP       NAV_RIGHT      XXX      
//├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤ ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
    XXX           XXX           XXX           XXX           XXX             XXX           &kp PG_DN     &kp PG_UP    XXX           CANCEL          
//╰─────────────┴─────────────┴─────────────┼─────────────┼─────────────┤ ├─────────────┼─────────────┼─────────────┴─────────────┴─────────────╯
                                              ___           ___             ___           ___
//                                          ╰─────────────┴─────────────╯ ╰─────────────┴─────────────╯
)

ZMK_LAYER(Fn,
//╭─────────────┬─────────────┬─────────────┬─────────────┬─────────────╮ ╭─────────────┬─────────────┬─────────────┬─────────────┬─────────────╮
    XXX           &kp C_PREV    &kp C_VOL_UP  &kp C_NEXT     XXX            XXX           &kp F7        &kp F8        &kp F9        &kp F12       
//├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤ ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
    &sk LGUI      MUTE          VOL_DOWN      PLAY_PAUSE     XXX            XXX          &hmr RCTRL F4 &hmr RSHIFT F5 &hmr LALT F6  &hmr RGUI F11
//├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤ ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
    XXX           XXX           CHATGPT       TRANSLATE      ALFRED         XXX           &kp F1        &kp F2        &kp F3        &kp F10       
//╰─────────────┴─────────────┴─────────────┼─────────────┼─────────────┤ ├─────────────┼─────────────┼─────────────┴─────────────┴─────────────╯
                                              ___            ___            ___           ___
//                                          ╰─────────────┴─────────────╯ ╰─────────────┴─────────────╯
)

ZMK_LAYER(Sys,
//╭─────────────┬─────────────┬─────────────┬─────────────┬─────────────╮ ╭─────────────┬─────────────┬─────────────┬─────────────┬─────────────╮
    &bt BT_SEL 0  &bt BT_SEL 1  &bt BT_SEL 2  &bt BT_SEL 3  &bt BT_CLR       XXX           XXX           &to FOCAL    &to GRAPHITE  &to BASE          
//├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤ ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
    &bootloader   XXX           XXX           XXX           XXX              XXX           XXX           XXX           XXX          &bootloader 
//├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤ ├─────────────┼─────────────┼─────────────┼─────────────┼─────────────┤
    &sys_reset    XXX           XXX           XXX           &mac_lock     XXX           XXX           XXX           XXX          &sys_reset 
//╰─────────────┴─────────────┴─────────────┼─────────────┼─────────────┤ ├─────────────┼─────────────┼─────────────┴─────────────┴─────────────╯
                                              ___           ___             ___           ___
//                                          ╰─────────────┴─────────────╯ ╰─────────────┴─────────────╯
)

/* vim: set ft=c tw=146: */
